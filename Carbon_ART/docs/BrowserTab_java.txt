

# ğŸš€ **What BrowserTab.java Does**

`BrowserTab` is a helper class that handles:

### âœ” Creating a new tab

### âœ” Loading a URL inside a WebView

### âœ” Updating tab title when the page changes

### âœ” Updating the address bar

### âœ” Handling closing of the last tab

### âœ” Returning the active WebEngine

### âœ” Normalizing & loading URLs

It is basically the **â€œbrainâ€ of each tab** in your browser.

---

# ğŸ” **Letâ€™s go through the file step by step**

---

# 1ï¸âƒ£ **createBrowserTab()**

This is the most important method â€” it creates and configures a new browser tab.

---

## ğŸ“Œ Create WebView + WebEngine

```java
WebView webView = new WebView();
WebEngine engine = webView.getEngine();
engine.load(url);
```

* `WebView` = HTML display area (like Chromeâ€™s webpage).
* `WebEngine` = the core engine inside WebView that loads & executes pages.
* `engine.load(url)` loads the initial URL (e.g., Google.com).

---

## ğŸ“Œ Create the Tab

```java
Tab tab = new Tab("New Tab");
tab.setContent(webView);
```

* Creates a new tab with the title â€œNew Tabâ€
* Places the WebView *inside* the tab

---

## ğŸ“Œ Update tab title + address bar when URL changes

```java
engine.locationProperty().addListener((obs, oldLoc, newLoc) -> {
    tab.setText(Utils.shortTitle(newLoc));
    if (tabPane.getSelectionModel().getSelectedItem() == tab) {
        addressBar.setText(newLoc);
    }
});
```

This listener fires **when the page navigates**.

### What it does:

1. **Changes the tab title** to a short version of the URL
2. **Updates the address bar** only if this tab is currently selected

Example:

* If URL changes to `https://youtube.com`, tab title becomes `youtube.com`.

---

## ğŸ“Œ Update tab title again when the page title loads

```java
engine.titleProperty().addListener((obs, old, title) -> {
    if (title != null && !title.isBlank()) tab.setText(Utils.truncate(title, 30));
});
```

This sets the tab's title using the webpage's `<title>`
Example:

* Page title: `"YouTube - Broadcast Yourself"`
* After truncate â†’ `"YouTube - Broadcast Yoâ€¦"`

Much nicer than showing long URLs.

---

## ğŸ“Œ Handle tab closing (important!)

```java
tab.setOnClosed(e -> {
    if (tabPane.getTabs().isEmpty()) {
        Tab t = createBrowserTab(BrowserUI.HOME, tabPane, addressBar);
        tabPane.getTabs().add(t);
        tabPane.getSelectionModel().select(t);
    }
});
```

### What this means:

* If user closes **the last tab**, your browser will NOT exit.
* Instead, it automatically opens a new HOME tab.

Just like Chrome or Edgeâ€”never leaves you with no tab open.

---

## ğŸ“Œ Return the configured tab

```java
return tab;
```

That's the full lifecycle of a new browser tab.

---

# 2ï¸âƒ£ **getEngine()**

```java
public static Optional<WebEngine> getEngine(TabPane tabPane) {
    var sel = tabPane.getSelectionModel().getSelectedItem();
    if (sel == null) return Optional.empty();
    if (sel.getContent() instanceof WebView) {
        return Optional.of(((WebView) sel.getContent()).getEngine());
    }
    return Optional.empty();
}
```

### Purpose:

Returns the `WebEngine` of the currently selected tab, or `Optional.empty()` if not found.

This method makes sure **no NullPointerException happens**.

BrowserUI uses this method for:

* Back
* Forward
* Reload
* Bookmarking
* Getting current URL
  etc.

---

# 3ï¸âƒ£ **loadAddress()**

```java
public static void loadAddress(TabPane tabPane, String text) {
    if (text == null || text.isBlank()) return;
    String url = Utils.normalizeUrl(text);
    getEngine(tabPane).ifPresent(engine -> engine.load(url));
}
```

### Steps:

1. If address bar is empty â€” do nothing.
2. Normalize URL:

   * `youtube.com` â†’ `https://youtube.com`
   * `google.com` â†’ `https://google.com`
3. Load URL in the active tab using WebEngine

This is called when:

* You press **Go**
* You press **Enter**
* You click **Home**
* You click a bookmark

---

# ğŸ¨ SUMMARY (In simple words)

> **BrowserTab is the Tab Manager.**
> It builds tabs, loads pages, sets titles, syncs the address bar, and returns the active WebEngine for navigation.

---

# ğŸ§  Why BrowserTab is separated from BrowserUI?

âœ” Cleaner structure
âœ” BrowserUI handles layout
âœ” BrowserTab handles everything inside each tab
âœ” Easier to add features later:

* Per-tab history
* Per-tab favicon
* Loading indicator
* Tab suspending
* Tab private mode
* Tab memory management

---

# ğŸŒŸ Want enhanced features next?

I can add any of these inside BrowserTab:

### â­ Favicon support (show website icon in tab)

### â­ Page loading progress bar

### â­ Dark mode per tab

### â­ Private tab

### â­ Tab duplication

### â­ Error page (like "No internet")

Just tell me: **â€œAdd favicon supportâ€** or whichever you want next.

Now send the next file you want explained:
ğŸ‘‰ **BookmarkManager.java** or **Utils.java**.
